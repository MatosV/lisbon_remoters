<article>
    <h1>{{ place.name }}</h1>
    <small>Created by {{ place.creator.email }}</small>
    <img src="{{ place.images }}">
    <br />
    <p>{{ place.description }}</p>

    <div id="map-container"></div>

    <span>Latitude: {{ place.coordinates.[1] }} Longitude: {{ place.coordinates.[0] }}</span>
</article>

<ul>
  {{#each comments}}
    <li>
      <p>{{ content }}</p>
      <small>Commented by {{ creator }}</small>
      <br />
      <small>Created At {{ createdAt }}</small>
    </li>
  {{/each}}
</ul>

<form action="/comment/{{ place._id }}" method="POST">
  <label for="content-input"></label>
  <textarea id="content-input" name="content" placeholder="Post Comment"></textarea>

  <button>Submit Comment</button>
</form>

<script>
  function initMap () {
    const $mapContainer = document.getElementById('map-container');
    const map = new window.google.maps.Map($mapContainer, {
      center: { lat: 38.75, lng: -9.15 },
      zoom: 10
    });
    
    var lat = {{ place.coordinates.[1] }};
    var lng = {{ place.coordinates.[0] }};
    const marker = new window.google.maps.Marker({
      map,
      position: {
        lat,
        lng
      }
    });
  }
</script>

<script src='https://maps.googleapis.com/maps/api/js?key={{API_KEY}}&callback=initMap'async defer></script>
